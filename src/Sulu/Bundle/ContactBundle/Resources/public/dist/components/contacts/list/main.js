require.config({paths:{"decorators/contact-card":"../../sulucontact/js/components/contacts/list/decorators/contact-view"}}),define(["services/sulucontact/contact-manager","services/sulucontact/contact-router","services/sulucontact/contact-delete-dialog","widget-groups"],function(a,b,c,d){"use strict";var e={datagridInstanceName:"contacts",listViewStorageKey:"contactListView"},f=function(){this.sandbox.on("sulu.toolbar.delete",function(){this.sandbox.emit("husky.datagrid."+e.datagridInstanceName+".items.get-selected",g.bind(this))},this),this.sandbox.on("sulu.contacts.contact.deleted",function(a){this.sandbox.emit("husky.datagrid."+e.datagridInstanceName+".record.remove",a)},this),this.sandbox.on("sulu.toolbar.add",function(){b.toAdd()},this),this.sandbox.on("husky.datagrid."+e.datagridInstanceName+".number.selections",function(a){var b=a>0?"enable":"disable";this.sandbox.emit("sulu.header.toolbar.item."+b,"deleteSelected",!1)},this),this.sandbox.on("sulu.toolbar.change.table",function(){this.sandbox.emit("husky.datagrid."+e.datagridInstanceName+".view.change","table"),this.sandbox.sulu.saveUserSetting(e.listViewStorageKey,"table")}.bind(this)),this.sandbox.on("sulu.toolbar.change.contact-card",function(){this.sandbox.emit("husky.datagrid."+e.datagridInstanceName+".view.change","decorators/contact-card"),this.sandbox.sulu.saveUserSetting(e.listViewStorageKey,"decorators/contact-card")}.bind(this))},g=function(b){c.showDialog(b,function(){a["delete"](b)}.bind(this))},h=function(a){this.sandbox.emit("sulu.sidebar.set-widget","/admin/widget-groups/contact-info?contact="+a)},i=function(a){b.toEdit(a)};return{view:!0,layout:{content:{width:"max"},sidebar:{width:"fixed",cssClasses:"sidebar-padding-50"}},header:{noBack:!0,toolbar:{buttons:{add:{},deleteSelected:{}}}},templates:["/admin/contact/template/contact/list"],initialize:function(){this.render(),f.call(this)},render:function(){this.sandbox.dom.html(this.$el,this.renderTemplate("/admin/contact/template/contact/list")),this.sandbox.sulu.initListToolbarAndList.call(this,"contacts","/admin/api/contacts/fields",{el:this.$find("#list-toolbar-container"),instanceName:"contacts",template:this.sandbox.sulu.buttons.get({settings:{options:{dropdownItems:[{type:"columnOptions"}]}},layoutContact:{}})},{el:this.sandbox.dom.find("#people-list",this.$el),url:"/admin/api/contacts?flat=true",searchInstanceName:"contacts",searchFields:["fullName"],view:this.sandbox.sulu.getUserSetting(e.listViewStorageKey)||"decorators/contact-card",resultKey:"contacts",instanceName:e.datagridInstanceName,clickCallback:d.exists("contact-info")?h.bind(this):null,actionCallback:i.bind(this)},"contacts","#people-list-info")}}});