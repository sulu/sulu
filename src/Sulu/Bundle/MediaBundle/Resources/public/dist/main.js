require.config({paths:{sulumedia:"../../sulumedia/dist",sulumediacss:"../../sulumedia/css","extensions/masonry":"../../sulumedia/dist/extensions/masonry","extensions/sulu-buttons-mediabundle":"../../sulumedia/dist/extensions/sulu-buttons","services/sulumedia/media-router":"../../sulumedia/dist/services/media-router","services/sulumedia/overlay-manager":"../../sulumedia/dist/services/overlay-manager","services/sulumedia/collection-manager":"../../sulumedia/dist/services/collection-manager","services/sulumedia/media-manager":"../../sulumedia/dist/services/media-manager","services/sulumedia/user-settings-manager":"../../sulumedia/dist/services/user-settings-manager","services/sulumedia/file-icons":"../../sulumedia/dist/services/file-icons","type/media-selection":"../../sulumedia/dist/validation/types/media-selection","datagrid/decorators/masonry-view":"../../sulumedia/dist/components/collections/masonry-decorator/masonry-view"}}),define(["services/sulumedia/media-router","services/sulumedia/overlay-manager","extensions/masonry","extensions/sulu-buttons-mediabundle","sulumedia/ckeditor/media-link","css!sulumediacss/main"],function(a,b,c,d,e){"use strict";return{name:"SuluMediaBundle",initialize:function(f){var g=f.sandbox;f.components.addSource("sulumedia","/bundles/sulumedia/dist/components"),c.initialize(f),d.initialize(f),g.urlManager.setUrl("media","media/collections/edit:<%= collectionId %>/files/edit:<%= mediaId %>",function(a){return{mediaId:a.properties.media_id,collectionId:a.properties.collection_id}}),g.mvc.routes.push({route:"media/collections/root",callback:function(){return'<div data-aura-component="collections/root@sulumedia"/>'}}),g.mvc.routes.push({route:"media/collections/edit::id/:content",callback:function(a){return'<div data-aura-component="collections/edit@sulumedia" data-aura-id="'+a+'"/>'}}),g.mvc.routes.push({route:"media/collections/edit::id/:content/edit::mediaId",callback:function(b,c,d){g.sulu.viewStates["media-file-edit-id"]=parseInt(d),a.toCollection(b)}}),g.ckeditor.addPlugin("mediaLink",new e(f.sandboxes.create("plugin-media-link"))),g.ckeditor.addToolbarButton("links","MediaLink","image"),f.components.before("initialize",function(){"Sulu App"===this.name&&(this.sandbox.on("husky.data-navigation.collections.selected",function(b){null===b&&a.toRoot()}.bind(this)),this.sandbox.on("husky.data-navigation.collections.add",function(a){b.startCreateCollectionOverlay.call(this,a)}.bind(this)),this.sandbox.on("sulu.media.collection-create.created",function(b){a.toCollection(b.id),this.sandbox.emit("husky.data-navigation.collections.reload",function(){this.sandbox.emit("husky.data-navigation.collections.select",b.id)})}.bind(this)),this.sandbox.on("husky.dropzone.error",function(a,b){var c=this.sandbox.translate("sulu.dropzone.error.title"),d="sulu.dropzone.error.message";c=c.replace("{{filename}}",this.sandbox.util.cropMiddle(b.name,20)),5007===a.code&&(d="sulu.dropzone.error.message.wrong-filetype"),this.sandbox.emit("sulu.labels.error.show",d,c)}.bind(this)),this.sandbox.on("husky.dropzone.error.file-to-big",function(a,b){var c=this.sandbox.translate("sulu.dropzone.error.file-to-big.title");c=c.replace("{{filename}}",this.sandbox.util.cropMiddle(b.name,20)),this.sandbox.emit("sulu.labels.error.show",a,c)}.bind(this)))})}}});