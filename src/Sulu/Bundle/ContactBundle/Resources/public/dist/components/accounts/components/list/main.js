define(["mvc/relationalstore","app-config","widget-groups"],function(a,b,c){"use strict";var d={datagridInstanceName:"accounts"},e=function(){this.sandbox.on("sulu.list-toolbar.delete",function(){this.sandbox.emit("husky.datagrid."+d.datagridInstanceName+".items.get-selected",function(a){this.sandbox.emit("sulu.contacts.accounts.delete",a)}.bind(this))},this),this.sandbox.on("sulu.list-toolbar.add",function(){this.sandbox.emit("sulu.contacts.accounts.new")},this),this.sandbox.on("husky.datagrid."+d.datagridInstanceName+".number.selections",function(a){var b=a>0?"enable":"disable";this.sandbox.emit("husky.toolbar.accounts.item."+b,"delete",!1)}.bind(this)),c.exists("account-info")&&this.sandbox.on("husky.datagrid."+d.datagridInstanceName+".item.click",function(a){this.sandbox.emit("sulu.sidebar.set-widget","/admin/widget-groups/account-info?account="+a)},this)};return{view:!0,layout:{content:{width:"max",leftSpace:!1,rightSpace:!1},sidebar:{width:"fixed",cssClasses:"sidebar-padding-50"}},header:function(){return{title:"contact.accounts.title",noBack:!0,breadcrumb:[{title:"navigation.contacts"},{title:"contact.accounts.title"}]}},templates:["/admin/contact/template/account/list"],initialize:function(){this.render(),e.call(this)},render:function(){a.reset(),this.sandbox.dom.html(this.$el,this.renderTemplate("/admin/contact/template/account/list")),this.sandbox.sulu.initListToolbarAndList.call(this,"accounts","/admin/api/accounts/fields",{el:this.$find("#list-toolbar-container"),instanceName:"accounts",parentTemplate:"default",inHeader:!0,groups:[{id:1,align:"left"},{id:2,align:"right"}],template:function(){return this.getToolbarTemplate()}.bind(this)},{el:this.sandbox.dom.find("#companies-list",this.$el),url:"/admin/api/accounts?flat=true",resultKey:"accounts",searchInstanceName:"accounts",instanceName:d.datagridInstanceName,searchFields:["name"],viewOptions:{table:{icons:[{icon:"pencil",column:"name",align:"left",callback:function(a){this.sandbox.emit("sulu.contacts.accounts.load",a)}.bind(this)}],highlightSelected:!0,fullWidth:!0}}},"accounts","#companies-list-info")},getToolbarTemplate:function(){return[{id:"add",icon:"plus-circle","class":"highlight-white",position:1,title:this.sandbox.translate("sulu.list-toolbar.add"),callback:function(){this.sandbox.emit("sulu.list-toolbar.add")}.bind(this)}]}}});